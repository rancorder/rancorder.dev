---
title: "データベース不要で月100万PVを支える、判断を減らす静的ブログ設計"
date: "2026-01-25"
category: "PoC→Production"
excerpt: "シンプルさを追求した結果、スケールと安定性がついてきた。データベース・サーバー・CMSを捨てた設計判断の全て。"
readingTime: "9 min read"
tags: ["Architecture", "静的サイト", "意思決定設計", "Next.js"]
---

# 🚀 データベース不要で月100万PVを支える、判断を減らす静的ブログ設計

ブログを作るなら、WordPressかHeadless CMS。データはデータベースで管理し、サーバーを立てる。

それで困らないケースも、確かに多い。

**ただ、私はその前提をすべて捨てた。**

<Callout type="error">
❌ **シンプルの追求**

- データベースは使わない
- サーバーも持たない
- CMSすら導入しない
</Callout>

それでもこのサイトは、**月100万PV規模まで同一コストで運用できている。**

<Callout type="info">
💡 **この記事の焦点**

本稿は「どう作ったか」よりも、**なぜその設計判断を選んだか**に焦点を当てる。

技術選定における「判断の減らし方」こそが、長期運用の鍵だと考えている。
</Callout>

---

## なぜそれが起きるか（構造） {#problem}

ブログ運用で本当に重いのは、表示速度でも機能不足でもない。

**判断が必要になる依存が増えること**だ。

### 依存が生む判断の連鎖 {#problem-dependencies}

- ⚠️ データベース障害時にどう復旧するか考える
- 💾 バックアップやマイグレーション戦略に悩む
- 📈 トラフィック増加時のスケール設計を議論する
- 🔐 セキュリティパッチの適用タイミングを判断する
- 💸 コスト最適化のための構成変更を検討する

<Callout type="warning">
⚠️ **本質的な問題**

これらはすべて、**「書く」という行為と無関係**だ。

記事を書くために始めたブログが、インフラ運用のために時間を奪われる。
</Callout>

---

## 解決の方針（設計原則3つ） {#solution}

### 原則1: 依存を減らし、判断点を消す {#principle-1}

データベース・CMS・サーバーという依存を減らすことで、運用中に発生する「どうする？」を最小化する。

依存が少ないほど、壊れる箇所も減り、判断も減る。

<Callout type="success">
✅ **具体的な削減例**

- **DB削除 →** マイグレーション・バックアップ・レプリケーションの判断が消える
- **サーバー削除 →** 障害対応・スケーリング・メンテナンスの判断が消える
- **CMS削除 →** プラグイン管理・権限設計・セキュリティ対策の判断が消える
</Callout>

### 原則2: 壊れ方を先に決める {#principle-2}

製造業で学んだのは、「失敗しない設計」ではなく**「失敗しても迷わない設計」**だった。

<Callout type="info">
💡 **設計時の問いかけ**

- ビルドが失敗したら？ → 前回の成功版がそのまま稼働
- ホスティングが障害したら？ → 別プロバイダに即移行可能
- 記事データが消えたら？ → Gitの履歴から完全復旧

これらの答えが即座に出る設計にしておく。
</Callout>

### 原則3: 書く以外の摩擦をゼロにする {#principle-3}

記事を書く以外の作業が増えた瞬間、ブログは止まる。

エディタを開いて、HTMLを書いて、Gitにコミットする。それだけ。

---

## 実装 / 運用の具体 {#implementation}

### 📁 ファイルベースCMS {#file-based-cms}

記事はHTMLファイルとして管理する。Gitがそのまま「CMS」になる。

```bash
# 記事の追加
git add content/blog/2026-01-25-new-article.html
git commit -m "Add new article"
git push

# 自動でビルド → デプロイ
```

<Callout type="success">
✅ **ファイルベースの利点**

- **データベース不要** - ファイルシステムが唯一の真実
- **履歴＝バックアップ** - Gitがすべての履歴を保持
- **ホスティング移行が容易** - HTMLファイルをコピーするだけ
- **オフライン編集可能** - ネット環境不要で執筆できる
</Callout>

### ⚡ 完全静的生成（SSG） {#static-generation}

Next.jsで静的生成し、CDN配信のみ。サーバーサイドの処理は一切ない。

```typescript
// pages/blog/[slug].tsx
export async function getStaticProps({ params }) {
  const content = await fs.readFile(
    `content/blog/${params.slug}.html`,
    'utf-8'
  );
  
  return {
    props: { content }
  };
}

export async function getStaticPaths() {
  const files = await fs.readdir('content/blog');
  const paths = files.map(file => ({
    params: { slug: file.replace('.html', '') }
  }));
  
  return { paths, fallback: false };
}
```

<Callout type="info">
💡 **静的生成の効果**

ビルド時に全ページを生成するため、トラフィック増加がコスト増加に直結しない。

100PVでも100万PVでも、CDNの配信コストはほぼ同じ。
</Callout>

### 🚀 デプロイフロー {#deployment}

GitHub Actionsで自動化。プッシュから公開まで約3分。

```yaml
# .github/workflows/deploy.yml
name: Build and Deploy

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run build
      - uses: cloudflare/pages-action@v1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: my-blog
          directory: out
```

---

## 他システムとの比較 {#comparison}

| 項目 | WordPress + DB | Headless CMS | 本システム（静的） |
|------|----------------|--------------|-------------------|
| **データベース** | ❌ 必須（MySQL等） | ❌ 必須（CMS内蔵） | ✅ 不要 |
| **サーバー** | ❌ 必須（PHP実行環境） | ⚠️ CMS側で管理 | ✅ 不要（静的配信のみ） |
| **月額コスト** | 💸 $20〜100+ | 💸 $15〜500+ | 🎉 $0〜5（CDNのみ） |
| **障害点** | ⚠️ DB / PHP / プラグイン | ⚠️ CMS API / ネットワーク | ✅ ビルド時のみ |
| **スケーリング** | ❌ 複雑（DB負荷対策） | ⚠️ プラン変更が必要 | ✅ CDNが自動対応 |
| **バックアップ** | ❌ 別途設定が必要 | ⚠️ CMS依存 | ✅ Git履歴が完全版 |
| **移行の容易さ** | ❌ エクスポート/変換必要 | ⚠️ API依存度高い | ✅ ファイルコピーのみ |

<Callout type="success">
✅ **コスト比較の実例**

**100万PV/月の場合**

- WordPress（VPS） - 約$50〜150/月
- Headless CMS - 約$100〜500/月
- 本システム（Cloudflare Pages） - **$0/月**

年間コスト差額: **最大$6,000の削減**
</Callout>

---

## 制約と向き不向き {#limitations}

### このシステムが向かないケース {#not-suitable}

<Callout type="warning">
⚠️ **避けるべき用途**

- ❌ リアルタイムコメント機能が必須
- ❌ ユーザー投稿型のコンテンツ
- ❌ 頻繁な動的コンテンツ更新（分単位）
- ❌ 複雑な権限管理が必要
- ❌ 非エンジニアが単独で運用
</Callout>

### このシステムが最適なケース {#suitable}

<Callout type="success">
✅ **推奨する用途**

- 技術ブログ・ドキュメントサイト
- ポートフォリオ・企業サイト
- 月1〜10記事程度の更新頻度
- エンジニアが主な運用者
- 長期運用・低コスト重視
</Callout>

---

## 判断を減らす設計フレームワーク {#decision-framework}

この設計を他のシステムにも応用するための、判断削減フレームワーク。

### 設計時の3つの問い {#framework-questions}

<Tabs>
  <Tab label="問い1: 本質的依存か？">

**「なければ目的が達成できない」依存だけを残す。**

**例:** ブログの目的は「記事を公開すること」。データベースは本質的依存ではない。

```typescript
// 本質的依存の例
const essentialDependencies = [
  'Next.js', // ビルドツール
  'Git',     // バージョン管理
  'CDN'      // 配信インフラ
];

// 非本質的依存（削除可能）
const nonEssential = [
  'Database',  // ファイルで代替可能
  'CMS',       // Gitで代替可能
  'Server'     // 静的配信で代替可能
];
```
  </Tab>

  <Tab label="問い2: 復旧手順は明確か？">

**「たぶん大丈夫」ではなく、「こうすれば確実に直る」が言えるか。**

**例:** ビルドエラー → 前回のコミットに戻す（1コマンドで復旧）

```bash
# 障害発生時の復旧手順
git revert HEAD
git push

# 前回の成功版が自動で再デプロイされる
# 所要時間: 約3分
```
  </Tab>

  <Tab label="問い3: 判断を先送りしていないか？">

**「とりあえず」で導入した技術は、後で必ず判断コストを生む。**

**例:** 「とりあえずCMS」→ 後で移行コストが発生

| 先送り判断 | 後で発生する問題 |
|-----------|----------------|
| とりあえずWordPress | データ移行が困難 |
| とりあえずHeadless CMS | API依存で縛られる |
| とりあえずDB導入 | マイグレーション地獄 |
  </Tab>
</Tabs>

---

## 実運用での効果（数値） {#real-world-impact}

| 指標 | 導入前（WordPress） | 導入後（静的） | 改善率 |
|------|-------------------|---------------|--------|
| **月額コスト** | $80 | $0 | ✅ 100%削減 |
| **TTFB（初回表示）** | 1.8秒 | 0.3秒 | ✅ 83%改善 |
| **障害発生回数/年** | 12回 | 0回 | ✅ 100%削減 |
| **運用工数/月** | 8時間 | 0.5時間 | ✅ 94%削減 |

<Callout type="success">
✅ **最も大きな変化**

「インフラが気になって記事が書けない」状態から、**「書くことだけに集中できる」**状態へ。

記事公開頻度は導入前の **2.5倍** に増加した。
</Callout>

---

## まとめ {#summary}

このブログシステムは、派手な技術の集合体ではない。

**判断・依存・迷いを減らした結果として、スケールと安定性がついてきただけだ。**

<Callout type="success">
✅ **設計の本質**

- 依存を減らせば、判断も減る
- 壊れ方を決めれば、迷わない
- 摩擦をなくせば、続けられる
</Callout>

## 次のステップ {#next-steps}

この記事を読んで、自分のプロジェクトに応用したいと思った方へ。

<Steps>

### Step 1: 小さく始める {#step-1}

まず1つの依存を減らしてみる。

```bash
# 例: CMSをやめて、Markdownファイルで記事管理
mkdir content/blog
echo "# My First Post" > content/blog/first-post.md
```

### Step 2: 失敗を設計する {#step-2}

「壊れたらどうする？」を先に決める。

```yaml
# 復旧手順をドキュメント化
## ビルドエラー時
1. git revert HEAD
2. git push
3. 自動で前回版がデプロイされる

## ホスティング障害時
1. Cloudflare Pages → Vercelに切り替え
2. 所要時間: 約10分
```

### Step 3: 判断を計測する {#step-3}

「今月、何回判断したか？」を記録する。

| 日付 | 判断内容 | 所要時間 |
|------|---------|---------|
| 1/10 | DB障害対応 | 3時間 |
| 1/15 | プラグイン更新 | 1時間 |
| 1/20 | スケール対策 | 5時間 |

→ **月9時間が「書く以外」に消えている**ことが可視化される

</Steps>

<Callout type="success">
✅ **最後に**

技術選定で迷ったときは、**「それは判断を減らすか？」**と自分に問い直してみてほしい。

その問いが、長期運用を支える設計へと導いてくれる。
</Callout>
